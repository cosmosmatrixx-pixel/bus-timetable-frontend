<!DOCTYPE html>
<html>
<head>
  <title>Bus Results</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>

<header class="navbar">
  <div class="nav-container">

    <div class="logo">
      ЁЯЪМ HR Route
    </div>

    <nav class="nav-links" id="navLinks">
      <a href="index.html">Home</a>
      <a href="index.html#search">Search</a>
      <a href="about.html">About Us</a>
      <a href="blog.html">Our Blog</a>
      <a href="contact.html">Contact Us</a>
        <a href="privacy-policy.html">Privacy Policy</a>
    </nav>

    <div class="menu-toggle" onclick="toggleMenu()">
      тШ░
    </div>

  </div>
</header>


<div class="container">

  <h2>ЁЯЪМ Available Buses</h2>

  <div id="result">Loading...</div>

</div>



<footer class="footer">

  <div class="footer-container">

    <!-- Column 1 -->
    <div class="footer-col">
      <h3>HR ROUTE</h3>
      <p class="visitor">Visitors : <b>11068117</b></p>

      <ul>
        <li><a href="about.html">About Us</a></li>
        <li><a href="contact.html">Contact Us</a></li>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Terms & Condition</a></li>
        <li><a href="#">FAQs & Help</a></li>
      </ul>
    </div>

    <!-- Column 2 -->
    <div class="footer-col">
      <h3>Contact</h3>
      <p>ЁЯУН Sector-17, Chandigarh</p>
      <p>ЁЯУЮ +91-720-270-4014</p>
      <p>тЬЙя╕П hrroute@gmail.com</p>

      <div class="social-icons">
        <a href="#">ЁЯМР</a>
        <a href="#">ЁЯУШ</a>
        <a href="#">ЁЯУ╕</a>
        <a href="#">тЦ╢я╕П</a>
      </div>
    </div>

    <!-- Column 3 -->
    <div class="footer-col">
      <h3>Gallery</h3>
      <div class="gallery">
<img src="images/hr1.jpg" alt="Bus">
  <img src="images/hr2.jpg " alt="Bus">
  <img src="images/hr3.jpg" alt="Bus">
  <img src="images/hr4.jpg" alt="Bus">
  <img src="images/hr5.jpg" alt="Bus">
  <img src="images/hr6.png" alt="Bus">
      </div>
    </div>

    <!-- Column 4 -->
    <div class="footer-col">
      <h3>Disclaimer</h3>
      <p class="disclaimer">
        рдпрд╛рддреНрд░рд┐рдпреЛрдВ рдХреЛ рд╕рд▓рд╛рд╣ рджреА рдЬрд╛рддреА рд╣реИ рдХрд┐ рдШрд░ рд╕реЗ
        рдирд┐рдХрд▓рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ рдмрд╕ рд╕реНрдЯреИрдВрдб рд╕реЗ
        рдмрд╕ рдХреА рдЯрд╛рдЗрдорд┐рдВрдЧ рдХреА рдкреБрд╖реНрдЯрд┐ рдХрд░ рд▓реЗрдВред
        рд╕рдордп рд╡ рд░реВрдЯ рдореЗрдВ рдкрд░рд┐рд╡рд░реНрддрди рд╕рдВрднрд╡ рд╣реИред
        рдХрд┐рд╕реА рднреА рдЕрд╕реБрд╡рд┐рдзрд╛ рдХреЗ рд▓рд┐рдП
        HR Route рдЬрд┐рдореНрдореЗрджрд╛рд░ рдирд╣реАрдВ рд╣реЛрдЧрд╛ред
      </p>
    </div>

  </div>

  <!-- Bottom Bar -->
  <div class="footer-bottom">
    <p>Designed & Developed by ЁЯСитАНЁЯОУ Graduate.</p>
    <p>2025 ┬й HR ROUTE | All Rights Reserved</p>
    <p>Made with тЭдя╕П for Haryana Citizens</p>
  </div>

</footer>


<script>
  const params = new URLSearchParams(window.location.search);
  const from = params.get("from");
  const to = params.get("to");

const API = "https://bus-timetable-backend.onrender.com";

fetch(`${API}/search?from=${from}&to=${to}`)

    .then(res => res.json())
    .then(data => {
      let html = "";

      if (!data || data.length === 0) {
        html = "<p>No bus found.</p>";
        document.getElementById("result").innerHTML = html;
        return;
      }

      data.forEach(bus => {
       html += `
  <div class="result-card">
    <div class="result-header">
      ЁЯЪМ ${bus.bus}

<button class="share-btn"
  title="Share on WhatsApp"
  onclick="shareRoute('${bus.bus}', '${from}', '${to}')">
  <i class="fab fa-whatsapp"></i>
</button>

    </div>
    <div class="station-list">
`;


        // bus.stations.forEach(s => {
        //   html += `
        //     <div class="station-item">
        //       <span class="station-name">${s.name}</span>
        //       <span class="station-time">${s.time}</span>
        //     </div>
        //   `;
        // });

        // new code in place of above only 
        const stations = bus.stations;
const first = stations[0];
const last = stations[stations.length - 1];
const middle = stations.slice(1, -1);

html += `
  <div class="station-item">
    <span class="station-name">${first.name}</span>
    <span class="station-time">${first.time}</span>
  </div>
`;

if (middle.length > 0) {
  html += `
    <div class="middle-stations" id="mid-${bus._id}">
  `;

  middle.forEach(s => {
    html += `
      <div class="station-item">
        <span class="station-name">${s.name}</span>
        <span class="station-time">${s.time}</span>
      </div>
    `;
  });

  html += `
    </div>

    <button class="toggle-btn"
      onclick="toggleStations('${bus._id}', this)">
      Show More тМД
    </button>
  `;
}

if (stations.length > 1) {
  html += `
    <div class="station-item">
      <span class="station-name">${last.name}</span>
      <span class="station-time">${last.time}</span>
    </div>
  `;
}


        html += `
            </div>
          </div>
        `;
      });

      document.getElementById("result").innerHTML = html;
    });




    function shareRoute(busName, from, to) {
  const siteLink = window.location.origin + "/index.html";
//   const siteLink = "https://yourdomain.com";


  const message =
    `ЁЯЪМ *Bus Route*\n` +
    `Bus: ${busName}\n` +
    `From: ${from}\n` +
    `To: ${to}\n\n` +
    `ЁЯФЧ Check timetable here:\n${siteLink}`;

  const whatsappUrl =
    "https://wa.me/?text=" + encodeURIComponent(message);

  window.open(whatsappUrl, "_blank");
}

</script>


<script>
function toggleStations(id, btn) {
  const el = document.getElementById("mid-" + id);

  if (el.style.display === "block") {
    el.style.display = "none";
    btn.innerText = "Show More тМД";
  } else {
    el.style.display = "block";
    btn.innerText = "Hide тЦ▓";
  }
}
</script>

<script>
function toggleMenu() {
  document.getElementById("navLinks").classList.toggle("show");
}
</script>



</body>
</html>
